:root{
  --brand:#ff5a6f; --brand-600:#ee3d55;
  --ink:#0f172a; --muted:#64748b;
  --line:#e5e7eb; --bg:#f7f8fb; --card:#fff;
  --bad:#B4231A; --good:#059669;
  --r:16px; --shadow:0 10px 28px rgba(15,23,42,.09)
}

/* Base */
*{box-sizing:border-box}
html,body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.55 Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
h1{font-weight:900;font-size:clamp(24px,3vw,34px);margin:0 0 .25rem}
h2{font-weight:800;font-size:18px;margin:0 0 .75rem}
p{margin:.25rem 0 .75rem;color:var(--muted)}

/* Layout principale */
#calculatorRoot{max-width:1200px;margin:24px auto;background:var(--card);padding:28px 30px;border-radius:var(--r);box-shadow:var(--shadow)}
.logo{height:36px}
.hr{height:4px;background:var(--brand);border:0;border-radius:4px;margin:.5rem 0 1.25rem}

.grid{display:grid;gap:20px}
.cols-main{grid-template-columns:1fr}
@media(min-width:1024px){ .cols-main{grid-template-columns:2fr 1fr} }

.cols-3{grid-template-columns:1fr}
@media(min-width:768px){ .cols-3{grid-template-columns:repeat(3,1fr)} }

.cols-4{grid-template-columns:1fr}
@media(min-width:900px){ .cols-4{grid-template-columns:repeat(4,1fr)} }

.card{background:#fbfbfd;border:1px solid var(--line);border-radius:12px;padding:16px;margin-bottom: 20px;}
.panel{background:#fff;border:1px solid var(--line);border-radius:16px;padding:20px;box-shadow:var(--shadow)}

label span{display:block;font-size:13px;color:var(--muted);font-weight:700;margin-bottom:6px}
input[type=number],input[type=text],input[type=date],input[type=search],textarea,select{
  width:100%;background:#fff;border:1px solid var(--line);border-radius:12px;
  padding:12px 14px;font-weight:600;outline:none;transition:border .15s,box-shadow .15s
}
input[type=number]:focus,textarea:focus,input[type=text]:focus,input[type=date]:focus,input[type=search]:focus,select:focus{
  border-color:var(--brand);box-shadow:0 0 0 4px rgba(14,165,233,.15)
}
textarea{min-height:110px;resize:vertical}

.btn{
  display:inline-block;border:0;background:var(--brand);color:#fff;font-weight:900;
  padding:12px 16px;border-radius:12px;cursor:pointer;transition:background .15s,transform .05s
}

.btn-minor{background:#eef2f7;color:#334155;font-weight:700;padding:10px 12px;border-radius:10px;border:1px solid #e5e7eb}
.btn-minor:hover{background:#e5e7eb}

.btn:hover{background:var(--brand-600)} .btn:active{transform:translateY(1px)}

.summary .row{
  display:flex;justify-content:space-between;align-items:center;
  padding:10px 0;border-bottom:1px dashed #eef2f7;font-size:13px;gap:16px
}
.summary .row strong{font-weight:800}
.bad{color:var(--bad)}
.good{color:var(--good)}
.note{font-size:12px;color:var(--muted);margin-top:.35rem}

  .bnbcalc-embed{max-width:800px;margin:20px auto; padding: 0 40px}
  .bnbcalc-iframe{
    width:100%;
    min-height:800px;       /* tua richiesta */
    height:70vh;            /* responsivo */
    border:1px solid #e5e7eb;
    border-radius:12px;
    background:#fff;
  }
 
/* Sticky summary (solo desktop/tablet) */
#summaryPanel{position:relative}
@media(min-width:1024px){
  #summaryPanel{position:sticky;top:16px}
}

/* Anteprime “per soggiorno” */
.panel.stat{display:flex;align-items:center;justify-content:space-between}

/* Pannello admin OV (nascosto in stampa) */
.ov-admin{
  background:#f6f3ff;border:1px solid #e7e3ff;border-radius:12px;padding:14px;margin-top:12px
}
.ov-admin .row{display:flex;justify-content:space-between;align-items:center;padding:6px 0;border-bottom:1px dashed #e8e8f6}
.ov-admin .row:last-child{border-bottom:0}
.ov-admin .grp{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin:8px 0 4px}
.ov-admin input[type=number]{max-width:120px}

#prospectManager .prospect-row{align-items:end;gap:12px}
#prospectManager .prospect-refresh{display:flex;align-items:flex-end;justify-content:flex-end}
#prospectManager .slug-input{display:flex;gap:8px;align-items:center}
#prospectManager .slug-input input{flex:1 1 auto}
#prospectManager .slug-input .btn{flex:0 0 auto}
#prospectManager .property-row{align-items:end;gap:12px}
#prospectManager .property-actions{display:flex;flex-wrap:wrap;gap:10px;justify-content:flex-end;align-items:center}
#prospectManager .property-actions .btn{white-space:nowrap}
#prospectManager .prospect-buttons{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px;justify-content:flex-end}
.prospect-bottom-actions{display:flex;flex-wrap:wrap;gap:10px;margin-top:20px;justify-content:flex-end}
.prospect-status{
  display:flex;align-items:center;gap:8px;
  font-size:13px;font-weight:600;color:#0f172a;
  margin-top:8px;padding:10px 12px;
  background:#f8fafc;border:1px solid #e2e8f0;border-radius:10px;
  transition:opacity .2s;
}
.prospect-status:empty{display:none}
.prospect-status::before{
  content:"i";
  display:inline-flex;align-items:center;justify-content:center;
  width:18px;height:18px;border-radius:50%;
  background:#cbd5f5;color:#1e293b;font-size:11px;font-weight:700;
}
.prospect-status.success{
  color:#065f46;background:#ecfdf3;border-color:#bbf7d0;
}
.prospect-status.success::before{
  content:"+";
  background:#16a34a;color:#fff;
}
.prospect-status.error{
  color:#b91c1c;background:#fef2f2;border-color:#fecaca;
}
.prospect-status.error::before{
  content:"!";
  background:#ef4444;color:#fff;
}
.prospect-status.info{
  color:#0f172a;background:#f8fafc;border-color:#e2e8f0;
}

.dropdown{position:relative}
.dropdown-toggle{
  width:100%;background:#fff;border:1px solid var(--line);border-radius:12px;
  padding:12px 40px 12px 14px;font-weight:600;text-align:left;
  display:flex;justify-content:space-between;align-items:center;gap:10px;
  cursor:pointer;transition:border .15s,box-shadow .15s,background .15s;
}
.dropdown-toggle::after{
  content:"v";font-size:12px;color:var(--muted);
}
.dropdown-toggle:focus{
  outline:none;border-color:var(--brand);box-shadow:0 0 0 4px rgba(14,165,233,.15);
}
.dropdown.is-open .dropdown-toggle{border-color:var(--brand)}
.dropdown-menu{
  position:absolute;top:calc(100% + 6px);left:0;width:100%;
  background:#fff;border:1px solid #dbe3ef;border-radius:12px;
  box-shadow:0 12px 24px rgba(15,23,42,.12);
  padding:6px 0;display:none;z-index:20;
  max-height:240px;overflow:auto;
}
.dropdown.is-open .dropdown-menu{display:block}
.dropdown-item{
  width:100%;text-align:left;border:0;background:transparent;
  padding:10px 14px;font-weight:600;color:#1f2937;cursor:pointer;
}
.dropdown-item:hover{background:#f1f5f9}
.dropdown-item.is-active{background:rgba(14,165,233,.14);color:#0f172a}

/* righe "device" con bottone rimuovi */
.device-row{display:grid;grid-template-columns:minmax(0,1fr) 150px auto;gap:10px;align-items:end}
.device-row .device-actions{display:flex;justify-content:flex-end}
.device-row input[data-type="device-extra"]{width:100%}
@media(max-width:640px){
  .device-row{grid-template-columns:1fr}
  .device-row .device-actions{justify-self:start}
}

.spese-header{align-items:center;margin:8px 0 12px;gap:16px}
.spese-title{font-size:13px;color:var(--muted);font-weight:700}
.spese-input{justify-self:end;width:100%}
@media(max-width:640px){
  .spese-header{grid-template-columns:1fr}
  .spese-input{justify-self:start;max-width:none}
}

@media print{ .ov-admin{display:none!important} .bnbcalc-embed, .bnbcalc-iframe{display:none !important;}}

/* Stato read-only per i campi annui quando AutoCalc è attivo */
.readonly{background:#fafafa;color:#6b7280}

/* Print: non stampare il calcolatore */
@media print{ #calculatorRoot{display:none!important} }

.toolbar{
  position:relative;
  z-index:1000;
}
/* Spese Extra layout adjustments */
.device-row{ display:grid; grid-template-columns: 1fr 160px auto; gap:12px; align-items:end; }
.device-row label span{ display:block; font-size:13px; color:var(--muted); font-weight:700; margin-bottom:6px; }
.device-actions{ display:flex; align-items:center; }
